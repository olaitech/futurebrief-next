<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />

  <title>FutureBrief - Blog</title>
  <meta name="description" content="Notes on building practical systems, AI workflows, and product thinking." />

  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    html, body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    canvas { touch-action: none; }
    html { scroll-behavior: smooth; }

    #fx-bg{
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
      background:
        radial-gradient(1200px 600px at 70% 30%, rgba(120,90,255,.22), transparent 60%),
        radial-gradient(900px 500px at 20% 70%, rgba(0,190,255,.14), transparent 65%),
        #000;
    }
    main{ position: relative; z-index: 1; }

    .nav-btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:.55rem .9rem;
      border:2px solid rgba(255,255,255,.9);
      border-radius:9999px;
      background: rgba(0,0,0,.35);
      color: rgba(255,255,255,.95);
      font-size:.85rem;
      font-weight:700;
      letter-spacing:.2px;
      transition: transform .18s ease, background .18s ease, box-shadow .18s ease, border-color .18s ease;
      box-shadow: 0 0 0 rgba(0,0,0,0);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .nav-btn:hover{
      transform: translateY(-2px);
      background: rgba(0,0,0,.55);
      box-shadow: 0 12px 28px rgba(0,0,0,.35);
      border-color: rgba(255,255,255,1);
    }
    .nav-btn:active{ transform: translateY(0); }
    .nav-btn:focus-visible{
      outline: none;
      box-shadow: 0 0 0 3px rgba(255,255,255,.25), 0 12px 28px rgba(0,0,0,.35);
    }

    .info-card{
      border-radius: 1rem;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.16);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 1.5rem;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }

    .hub-top{
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
    }
    .hub-btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:.6rem 1rem;
      border:2px solid rgba(255,255,255,.9);
      border-radius:9999px;
      background: rgba(0,0,0,.35);
      color: rgba(255,255,255,.95);
      font-size:.9rem;
      font-weight:700;
      letter-spacing:.2px;
      text-decoration: none;
      transition: transform .18s ease, background .18s ease, box-shadow .18s ease, border-color .18s ease;
      box-shadow: 0 0 0 rgba(0,0,0,0);
    }
    .hub-btn:hover{
      transform: translateY(-2px);
      background: rgba(0,0,0,.55);
      box-shadow: 0 12px 28px rgba(0,0,0,.35);
      border-color: rgba(255,255,255,1);
    }
    .hub-grid{
      display: grid;
      gap: 16px;
      margin-top: 18px;
    }
    @media (min-width: 768px){
      .hub-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (min-width: 1100px){
      .hub-grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }
    .hub-card{
      display: block;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(10,10,12,.35);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 16px;
      color: rgba(255,255,255,.9);
      text-decoration: none;
      transition: transform .18s ease, border-color .18s ease, box-shadow .18s ease, background .18s ease;
    }
    .hub-card:hover{
      transform: translateY(-4px);
      border-color: rgba(255,255,255,.3);
      background: rgba(12,12,14,.45);
      box-shadow: 0 16px 32px rgba(0,0,0,.35);
    }
    .hub-date{
      font-size: .78rem;
      opacity: .6;
    }
    .hub-title{
      margin-top: 6px;
      font-weight: 600;
      font-size: 1rem;
    }
    .hub-excerpt{
      margin-top: 8px;
      font-size: .9rem;
      opacity: .75;
    }
    .hub-section{
      margin-top: 16px;
      font-weight: 600;
      opacity: .9;
    }
  </style>
</head>

<body class="min-h-screen bg-neutral-950 text-neutral-100">
  <canvas id="fx-bg" aria-hidden="true"></canvas>

  <header class="fixed top-0 left-0 w-full z-50 bg-black/90 backdrop-blur">
    <div class="max-w-7xl mx-auto px-5 py-2 flex items-center justify-between">
      <a href="index.html" class="flex items-center">
        <img src="assets/logo.png" alt="Future AI Brief logo" class="h-16 w-auto" />
      </a>
      <nav class="flex gap-3 items-center">
        <a class="nav-btn" href="index.html">Home</a>
        <a class="nav-btn" href="index.html#contact">Contact</a>
        <a class="nav-btn" href="blogg.html" aria-label="Switch to Norwegian">NO</a>
      </nav>
    </div>
  </header>

  <main class="relative">
    <section class="mx-auto max-w-5xl px-5 pt-28 pb-24">
      <div class="info-card">
        <div class="hub-top">
          <div>
            <h1 class="text-3xl font-semibold md:text-4xl">Blog</h1>
            <p class="mt-2 text-sm text-white/70">
              Notes on building practical systems, AI workflows, and product thinking.
            </p>
            <div class="hub-section text-sm text-white/70">Latest posts</div>
          </div>
          <a class="hub-btn" href="https://substack.com/@kewinolaisen" target="_blank" rel="noopener noreferrer">Visit Substack</a>
        </div>
      </div>

      <div id="post-grid" class="hub-grid">
        <div class="hub-card">Loading latest posts...</div>
      </div>
    </section>
  </main>

  <script>
    (() => {
      const c = document.getElementById('fx-bg');
      if (!c) return;
      const ctx = c.getContext('2d', { alpha: true });
      let w = 0, h = 0, dpr = 1, particles = [], mx = 0, my = 0, tx = 0, ty = 0;

      function resize(){
        dpr = Math.min(window.devicePixelRatio || 1, 2);
        w = c.width  = Math.floor(window.innerWidth * dpr);
        h = c.height = Math.floor(window.innerHeight * dpr);
        c.style.width = window.innerWidth + 'px';
        c.style.height = window.innerHeight + 'px';

        particles = Array.from({length: 52}, () => ({
          x: Math.random()*w,
          y: Math.random()*h,
          r: (18 + Math.random()*60) * dpr,
          vx: (-0.22 + Math.random()*0.44) * dpr,
          vy: (-0.22 + Math.random()*0.44) * dpr,
          a: 0.06 + Math.random()*0.10
        }));
      }

      function draw(){
        mx += (tx - mx) * 0.06;
        my += (ty - my) * 0.06;

        ctx.clearRect(0,0,w,h);
        ctx.globalCompositeOperation = 'lighter';

        ctx.fillStyle = 'rgba(0,0,0,0.35)';
        ctx.fillRect(0,0,w,h);

        for(const p of particles){
          p.x += p.vx;
          p.y += p.vy;

          if(p.x < -p.r) p.x = w + p.r;
          if(p.x > w + p.r) p.x = -p.r;
          if(p.y < -p.r) p.y = h + p.r;
          if(p.y > h + p.r) p.y = -p.r;

          const px = p.x + (mx - w*0.5) * 0.02;
          const py = p.y + (my - h*0.5) * 0.02;

          const g = ctx.createRadialGradient(px, py, 0, px, py, p.r);
          g.addColorStop(0, `rgba(160,120,255,${p.a})`);
          g.addColorStop(0.45, `rgba(0,200,255,${p.a*0.55})`);
          g.addColorStop(1, 'rgba(0,0,0,0)');

          ctx.fillStyle = g;
          ctx.beginPath();
          ctx.arc(px, py, p.r, 0, Math.PI*2);
          ctx.fill();
        }

        ctx.globalCompositeOperation = 'source-over';
        requestAnimationFrame(draw);
      }

      window.addEventListener('resize', resize, {passive:true});
      window.addEventListener('pointermove', (e)=>{ tx = e.clientX*dpr; ty = e.clientY*dpr; }, {passive:true});

      resize();
      tx = window.innerWidth * dpr * 0.5;
      ty = window.innerHeight * dpr * 0.5;
      draw();
    })();
  </script>

  <script>
    (() => {
      const RSS_URL = 'https://kewinolaisen.substack.com/feed';
      const SUBSTACK_URL = 'https://substack.com/@kewinolaisen';
      const MAX_ITEMS = 6;
      const LOCALE = 'en-US';
      const grid = document.getElementById('post-grid');
      if (!grid) return;

      function stripHtml(html) {
        const tmp = document.createElement('div');
        tmp.innerHTML = html || '';
        return (tmp.textContent || '').trim();
      }

      function truncate(text, maxLen) {
        if (text.length <= maxLen) return text;
        return text.slice(0, maxLen).trim() + '...';
      }

      function formatDate(dateStr) {
        const d = new Date(dateStr);
        if (Number.isNaN(d.getTime())) return '';
        return d.toLocaleDateString(LOCALE, { year: 'numeric', month: 'short', day: 'numeric' });
      }

      function render(items) {
        const posts = items.slice(0, MAX_ITEMS);
        if (!posts.length) {
          grid.innerHTML = '<div class="hub-card">No posts yet. Visit Substack for updates.</div>';
          return;
        }
        grid.innerHTML = '';
        posts.forEach(item => {
          const title = item.title || 'Untitled';
          const date = formatDate(item.pubDate || item.published || item.date);
          const excerpt = truncate(stripHtml(item.description || item.content || ''), 140);
          const link = item.link || SUBSTACK_URL;

          const card = document.createElement('a');
          card.className = 'hub-card';
          card.href = link;
          card.target = '_blank';
          card.rel = 'noopener noreferrer';

          const dateEl = document.createElement('div');
          dateEl.className = 'hub-date';
          dateEl.textContent = date;

          const titleEl = document.createElement('div');
          titleEl.className = 'hub-title';
          titleEl.textContent = title;

          const excerptEl = document.createElement('div');
          excerptEl.className = 'hub-excerpt';
          excerptEl.textContent = excerpt;

          card.appendChild(dateEl);
          card.appendChild(titleEl);
          card.appendChild(excerptEl);
          grid.appendChild(card);
        });
      }

      async function fetchDirect() {
        const res = await fetch(RSS_URL);
        if (!res.ok) throw new Error('RSS fetch failed');
        const xmlText = await res.text();
        const doc = new DOMParser().parseFromString(xmlText, 'text/xml');
        return Array.from(doc.querySelectorAll('item')).map(item => ({
          title: item.querySelector('title')?.textContent || '',
          link: item.querySelector('link')?.textContent || '',
          pubDate: item.querySelector('pubDate')?.textContent || '',
          description: item.querySelector('description')?.textContent || ''
        }));
      }

      async function fetchProxy() {
        const url = 'https://api.rss2json.com/v1/api.json?rss_url=' + encodeURIComponent(RSS_URL);
        const res = await fetch(url);
        if (!res.ok) throw new Error('Proxy fetch failed');
        const data = await res.json();
        return Array.isArray(data.items) ? data.items : [];
      }

      (async () => {
        try {
          const items = await fetchDirect();
          render(items);
        } catch (err) {
          try {
            const items = await fetchProxy();
            render(items);
          } catch (proxyErr) {
            grid.innerHTML = '<div class="hub-card">Unable to load posts right now. Please visit Substack.</div>';
          }
        }
      })();
    })();
  </script>
</body>
</html>
